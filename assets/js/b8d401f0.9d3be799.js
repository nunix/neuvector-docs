"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6366],{61870:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var s=t(74848),i=t(28453);const a={title:"SAML (Azure AD)",taxonomy:{category:"docs"},slug:"/integration/msazure"},r=void 0,o={id:"integration/msazure/msazure",title:"SAML (Azure AD)",description:"Integrate with Azure AD SAML authentication",source:"@site/versioned_docs/version-5.3/08.integration/05.msazure/05.msazure.md",sourceDirName:"08.integration/05.msazure",slug:"/integration/msazure",permalink:"/integration/msazure",draft:!1,unlisted:!1,editUrl:"https://github.com/neuvector/docs/edit/main/versioned_docs/version-5.3/08.integration/05.msazure/05.msazure.md",tags:[],version:"5.3",sidebarPosition:5,frontMatter:{title:"SAML (Azure AD)",taxonomy:{category:"docs"},slug:"/integration/msazure"},sidebar:"tutorialSidebar",previous:{title:"SAML (Okta)",permalink:"/integration/saml"},next:{title:"SAML (ADFS)",permalink:"/integration/adfs"}},c={},d=[{value:"Integrate with Azure AD SAML authentication",id:"integrate-with-azure-ad-saml-authentication",level:3},{value:"Mapping Groups to Roles and Namespaces",id:"mapping-groups-to-roles-and-namespaces",level:4}];function l(e){const n={a:"a",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"integrate-with-azure-ad-saml-authentication",children:"Integrate with Azure AD SAML authentication"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'In the Azure management console, select the \u201dEnterprise applications" menu item in Azure Active Directory'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config1",src:t(10662).A+"",width:"975",height:"529"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Select \u201cNew Application\u201d"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config2",src:t(78077).A+"",width:"975",height:"523"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Create a Non-gallery application and give it a unique name"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config3",src:t(56948).A+"",width:"975",height:"521"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:'In the application\'s configuration page, select "Single sign-on" in the left-side panel and choose the SAML-based sign-on'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config4",src:t(48939).A+"",width:"975",height:"521"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:"Download the certificate in the base64 format and note the application's Login URL and Azure AD Identifier"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config5",src:t(85282).A+"",width:"975",height:"738"})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsx)(n.li,{children:'In the NeuVector management console, login as an administrator. Select \u201cSettings" in the administrator dropdown menu at the top-right corner. Click SAML settings'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config6",src:t(99289).A+"",width:"975",height:"517"})}),"\n",(0,s.jsxs)(n.ol,{start:"7",children:["\n",(0,s.jsx)(n.li,{children:"Configure the SAML server as follows:"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Copy application\'s "Login URL" as the Single Sign-On URL.'}),"\n",(0,s.jsx)(n.li,{children:'Copy "Azure AD Identifier" as the Issuer.'}),"\n",(0,s.jsx)(n.li,{children:"Open downloaded the certificate and copy the text to X.509 Certificate box."}),"\n",(0,s.jsx)(n.li,{children:"Set a default role."}),"\n",(0,s.jsxs)(n.li,{children:['Enter the group name for role mapping. The group claim returned by Azure are identified by the "Object ID" instead of the name. The group\'s object ID can be located in ',(0,s.jsx)(n.strong,{children:"Azure Active Directory > Groups > Group name Page"}),". You should use this value to configure group-based role mapping in NeuVector."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"OpenID5",src:t(5006).A+"",width:"975",height:"238"})}),"\n",(0,s.jsx)(n.p,{children:"Then Enable the SAML server."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config7",src:t(83536).A+"",width:"975",height:"552"})}),"\n",(0,s.jsxs)(n.ol,{start:"8",children:["\n",(0,s.jsx)(n.li,{children:"Copy the Redirect URL"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config8",src:t(57367).A+"",width:"975",height:"538"})}),"\n",(0,s.jsxs)(n.ol,{start:"9",children:["\n",(0,s.jsx)(n.li,{children:'Return to the Azure management console to setup "Basic SAML Configuration". Copy NeuVector console\'s Redirect URL to both "Identifier" and "Reply URL" boxes'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config9",src:t(83726).A+"",width:"975",height:"527"})}),"\n",(0,s.jsxs)(n.ol,{start:"10",children:["\n",(0,s.jsx)(n.li,{children:'Edit "SAML Signing Certificate", changing the Signing Option to "Sign SAML response"'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config10",src:t(20884).A+"",width:"975",height:"506"})}),"\n",(0,s.jsxs)(n.ol,{start:"11",children:["\n",(0,s.jsx)(n.li,{children:'Edit "User Attributes & Claims" so the response can carry the login user\'s attributes back to NeuVector. Click "Add new claim" to add "Username" and "Email" claims with "user.userprincipalname" and "user.mail" respectively.'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config11",src:t(53917).A+"",width:"975",height:"458"})}),"\n",(0,s.jsxs)(n.ol,{start:"12",children:["\n",(0,s.jsx)(n.li,{children:'If the users are assigned to the groups in the active directory, their group membership can be added to the claim. Find the application in "App registrations" and edit the manifest. Modify the value of "groupMembershipClaims" to "All".'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config12",src:t(72710).A+"",width:"975",height:"490"})}),"\n",(0,s.jsxs)(n.ol,{start:"13",children:["\n",(0,s.jsx)(n.li,{children:"Authorize users and groups to access the application so they can login NeuVector console with Azure AD SAML SSO"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"azure_config13",src:t(11727).A+"",width:"975",height:"510"})}),"\n",(0,s.jsx)(n.h4,{id:"mapping-groups-to-roles-and-namespaces",children:"Mapping Groups to Roles and Namespaces"}),"\n",(0,s.jsxs)(n.p,{children:["Please see the ",(0,s.jsx)(n.a,{href:"/configuration/users#mapping-groups-to-roles-and-namespaces",children:"Users and Roles"})," section for how to map groups to preset and custom roles as well as namespaces in NeuVector."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},10662:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure1-607a4d09a00d48a4bff3ef6331d9c264.png"},20884:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure10-161c432f9ffa868f3bc783ddcaf256d4.png"},53917:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure11-cd65e3d56703436bd180e6fa323f24a7.png"},72710:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure12-15217077a37f7bc6004cdbea50c2e2b5.png"},11727:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure13-1694fd4172b8074644c26e7c838da59c.png"},78077:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure2-40c7adf28cd916f0891086209feba5d6.png"},56948:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure3-4ca2d0c5cc5c01299bee883e07da5552.png"},48939:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure4-c82f2dcdbd7e491887dc2ea6d1a015c3.png"},85282:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure5-cd6750e74d07a4e9481b80a02ee348e2.png"},99289:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure6-12d23bd9bc899939c46de76c93e1e67e.png"},83536:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure7-dd23aa1d1bcc3cf9e0611b141ae83dde.png"},57367:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure8-96c4fe42eb1f550bd7216bc06806f41e.png"},83726:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/azure9-e217c6c8c7aeebdb11ad95cd4912b086.png"},5006:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/openid5-7ce8d551ea3ceed8ad50ce5b6cbe7a0d.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);